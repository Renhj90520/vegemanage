<div id="page-wrapper">
  <form>
    <fieldset>
      <input name="id" type="hidden" [(ngModel)]="newProduct.id">
      <div class="form-group">
        <div class="col-sm-8 nopadding">
          <label for="prodName">名称</label>
          <input class="form-control" id="prodName" name="prodName" type="text" [(ngModel)]="newProduct.name">
        </div>
      </div>
      <div class="form-group">
        <div class="col-sm-8 nopadding">
          <label for="count">数量</label>
          <input class="form-control" id="count" name="count" type="number" [(ngModel)]="newProduct.totalCount">
        </div>
      </div>
      <div class="form-group">
        <div class="col-sm-8 nopadding">
          <label for="unit">单位</label>
          <select class="form-control" id="unit" name="unit" (ngModelChange)="onUnitChange($event)" [ngModel]="newProduct.unitId">
            <option [value]="unit.id" *ngFor="let unit of units">{{unit.name}}</option>
          </select>
        </div>
      </div>
      <div class="form-group">
        <div class="col-sm-8 nopadding">
          <label for="category">分类</label>
          <select class="form-control" id="category" name="category" (ngModelChange)="onCateChange($event)" [ngModel]="newProduct.categoryId">
            <option [value]="category.id" *ngFor="let category of categories">{{category.name}}</option>
          </select>
        </div>
      </div>
      <div class="form-group">
        <div class="col-sm-8 nopadding">
          <label for="price">价格</label>
          <input class="form-control" id="price" name="price" type="number" [(ngModel)]="newProduct.price">
        </div>
      </div>
      <div class="form-group">
        <div class="col-sm-8 nopadding">
          <label for="description">描述</label>
          <input class="form-control" id="description" name="description" type="textarea" rows="3" [(ngModel)]="newProduct.description">
        </div>
      </div>
      <div class="form-group">
        <div class="col-sm-8 nopadding">
          <label for="upload">选择图片</label>
          <input type="file" ng2FileSelect multiple [uploader]="uploader" (change)="selectFileChanged($event)">
        </div>
      </div>
    </fieldset>
    <div class="pictures row">
      <div class="col-sm-4" *ngFor="let pic of newProduct.pictures;let ii of index">
        <img class="uploadPic" src="{{pic.path}}">
        <button class="btn btn-danger btn-xs" (click)="onPicedRemove(pic)">删除</button>
      </div>
      <div class="col-sm-4" *ngFor="let item of uploader.queue;let i of index">
        <div class="progress">
          <div class="progress-bar" role="progressbar" *ngIf="item" [ngStyle]="{'width':item.progress+'%'}"></div>
        </div>
        <button class="btn btn-xs btn-primary" (click)="item.upload()" [disabled]="item.isReady || item.isUploading || item.isSuccess"><i class="glyphicon glyphicon-upload"></i>上传</button>
        <button class="btn btn-xs btn-danger" (click)="onPicRemove(i)"><i class="glyphicon glyphicon-trash"></i>删除</button>
      </div>
    </div>
    <button class="btn btn-primary" style="margin-top:10px;" (click)="onSubmit()">提交</button>
  </form>
</div>